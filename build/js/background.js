!function(e){function n(e){return/^chrome-(devtools|extension)/.test(e.url)}function t(e){return function(){return!e.apply(null,arguments)}}var o=t(n);e.getTabs=function(n){chrome.tabs.query({},function(t){e.tabs=t.filter(o).sort(function(e,n){return n.index-e.index}),n&&n(e.tabs)})},e.getTabs(),chrome.tabs.onCreated.addListener(function(n){o(n)&&e.tabs.unshift(n)}),chrome.tabs.onRemoved.addListener(function(n){for(var t=0;t<e.tabs.length;t++)if(n===e.tabs[t].id){e.tabs.splice(t,1);break}chrome.runtime.sendMessage({event:"tabRemoved",tabId:n})}),chrome.tabs.onUpdated.addListener(function(n,t,i){for(var d=0;d<e.tabs.length;d++)if(i.index===e.tabs[d].index&&o(i)){e.tabs[d]=i;break}chrome.runtime.sendMessage({event:"tabUpdated",tab:i})}),chrome.tabs.onActivated.addListener(function(n){chrome.tabs.get(n.tabId,function(n){for(var t=0;t<e.tabs.length;t++)if(n.id===e.tabs[t].id){e.tabs.splice(t,1),e.tabs.unshift(n);break}})}),chrome.windows.onFocusChanged.addListener(function(n){n!==e.popupWindowId&&"number"==typeof e.popupWindowId&&chrome.windows.remove(e.popupWindowId,function(){e.popupWindowId=null})}),chrome.commands.onCommand.addListener(function(n){var t=450,o=new RegExp("win","i");o.test(navigator.platform)&&(t=480),"showTabularPopup"===n&&(null==e.popupWindowId?chrome.windows.create({url:"build/popup.html",type:"popup",focused:!0,width:t,height:600,left:screen.width/2-t/2,top:screen.height/2-300},function(n){e.popupWindowId=n.id}):chrome.windows.remove(e.popupWindowId,function(){e.popupWindowId=null}))})}(window);